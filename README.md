# 習作一：自動搜集圖像數據集與初步處理

## 學生資料

- 姓名：XU JIAXIN
- 學號：24829139
- 主題編號：9
- 主題名稱：世界各地的特色美食

## 安裝與初始化說明

1. **專案克隆與依賴安裝**

   ```bash
   git clone https://github.com/LucaXJX/DAE-IT-Assignment-3-1.git
   cd DAE-IT-Assignment-3-1
   npm install
   ```

2. **Pexels API 金鑰設置**
   - 前往 https://www.pexels.com/api/ 申請免費 API KEY
   - 在專案根目錄創建 `.env` 檔案，內容如下（將 `你的API金鑰` 替換為申請到的內容）：
     ```
     PEXELS_API_KEY=你的API金鑰
     ```

## 使用方式

1. **編譯 TypeScript 程式碼（如尚未執行）**

   ```bash
   npm run build
   ```

2. **完整自動化流程一鍵執行**

   ```bash
   npm start
   ```

3. **分步執行詳細流程**

   - **（1）自動搜尋並收集食物圖片 URL 與 alt 文字**  
     預設流程已設定於 `src/index.ts`

     ```bash
     npm run scrape
     ```

     > 說明：將涉及各國美食關鍵字、自動抓取相關圖片網址與 alt 文字，存於資料庫

   - **（2）下載圖片到本地**

     ```bash
     npm run download
     ```

   - **（3）圖像批量壓縮、裁剪、處理（尺寸壓縮到小於 500x500/50KB）**

     ```bash
     npm run process
     ```

   - **（4）查詢或檢查當前抓取/下載/壓縮進度**
     ```bash
     npm run stats
     ```

如有遺漏或疏失，請協助指出，謝謝！

## 功能完成度自評

### 1. 搜索和收集（30 分）

#### 關鍵字搜索與結果相關性（15 分）

- [x] 優良：精準關鍵字，90%+ 相關圖像（15 分）
- [ ] 滿意：較準確，70~89% 相關圖像（10 分）
- [ ] 有待改善：70% 以下相關性（5 分）

#### 收集網址與替代文字（15 分）

- [x] 優良：全部圖像的 src、alt 完整且正確（15 分）
- [ ] 滿意：多數正確，少量遺漏（10 分）
- [ ] 有待改善：大量缺失或錯誤（5 分）

---

### 2. 圖像下載和處理（50 分）

#### 下載及儲存（20 分）

- [x] 優良：下載達標（3000~5000 張）且正確存檔（20 分）
- [ ] 滿意：接近要求（2000~2999 或 5001~6000 張）（15 分）
- [ ] 有待改善：數量明顯不足（< 2000 張）（10 分）

#### 調整及裁剪（20 分）

- [x] 優良：全部正確裁剪至 500x500 像素以內，置中處理（20 分）
- [ ] 滿意：多數正確，少數有誤（15 分）
- [ ] 有待改善：多數未正確裁剪（10 分）

#### 重新編碼與尺寸（10 分）

- [x] 優良：所有圖像壓縮至 JPEG (quality 50~80)，且檔案 ≤50KB（10 分）
- [ ] 滿意：大部分達標，少數超標（7 分）
- [ ] 有待改善：多數未達標（4 分）

---

### 3. 自動化與代碼質量（20 分）

#### 自動化程度（10 分）

- [x] 優良：完全自動化，一鍵執行全流程（10 分）
- [ ] 滿意：大部分自動，少量人工介入（7 分）
- [ ] 有待改善：需大量人工操作（4 分）

#### 程式碼結構和註釋（10 分）

- [x] 優良：結構清晰，模組化佳，註釋完善（10 分）
- [ ] 滿意：基本可讀，有基本註釋（7 分）
- [ ] 有待改善：混亂或缺乏註釋（4 分）

## 專案結構

```

DAE-IT-Assignment-3-1/
├── database/
│   └── images.db                  # SQLite 圖像資料庫
├── erd.txt                        # ERD 數據表設計
├── src/
│   ├── index.ts                   # 主入口程式，自動化流程一鍵啟動
│   ├── config.ts                  # 配置（API、處理參數、關鍵字等）
│   ├── download.ts                # 圖像下載邏輯
│   ├── process.ts                 # 圖像尺寸調整、裁剪、壓縮
│   ├── scrape.ts                  # 圖像來源搜尋、自動收集 src/alt
│   ├── proxy.ts                   # 數據庫 Proxy 代理（自動生成）
│   ├── RateLimiter.ts             # API 速率限制追蹤
│   └── utils.ts                   # 通用輔助工具
├── .env                           # Pexels API 金鑰等敏感環境參數
├── package.json                   # 專案依賴、指令腳本
├── check-progress.js              # 統計進度用的小工具
├── 習作一：自動搜集圖像數據集與初步處理 - 學生指引.md
└── README.md

```

## 備註

- 本專案僅供學習用途
- 圖像版權歸原作者所有
- 下載圖像時請遵守相關使用條款
